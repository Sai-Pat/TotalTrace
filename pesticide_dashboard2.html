<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1"
		/>
		<title>AgriChain | Pesticide/Fertilizer Seller Dashboard</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link
			href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<script>
			tailwind.config = {
				theme: {
					extend: {
						colors: {
							primary: "#0a5c36",
							secondary: "#1a936f",
							accent: "#88d498",
							tomato: "#FF6347",
							tomatoLight: "#FF7F50",
						},
						fontFamily: {
							montserrat: [
								"Montserrat",
								"sans-serif",
							],
						},
					},
				},
			};
		</script>
		<style>
			body {
				font-family: "Montserrat", sans-serif;
				background: linear-gradient(
					135deg,
					#0a2e1d 0%,
					#0a5c36 100%
				);
				color: white;
				min-height: 100vh;
			}
			.glass-card {
				background: rgba(255, 255, 255, 0.1);
				border: 1px solid rgba(255, 255, 255, 0.2);
				backdrop-filter: blur(15px);
				border-radius: 20px;
				box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
			}
			.gradient-text {
				background: linear-gradient(
					90deg,
					#88d498,
					#1a936f
				);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
			}
			.btn-gradient {
				background: linear-gradient(
					90deg,
					#1a936f,
					#88d498
				);
			}
			.btn-gradient:hover {
				background: linear-gradient(
					90deg,
					#88d498,
					#1a936f
				);
			}
			input[type="file"]::-webkit-file-upload-button {
				cursor: pointer;
				background: #1a936f;
				border: none;
				color: white;
				padding: 0.3rem 0.6rem;
				border-radius: 0.4rem;
				transition: background 0.3s ease;
			}
			input[type="file"]::-webkit-file-upload-button:hover {
				background: #88d498;
			}
		</style>
	</head>
	<body class="flex flex-col items-center p-6">
		<!-- Header -->
		<header
			class="w-full max-w-6xl flex justify-between items-center mb-10"
		>
			<h1 class="text-3xl font-bold gradient-text">
				Pesticide/Fertilizer Seller Dashboard
			</h1>
			<nav class="flex gap-6 text-sm font-medium">
				<button
					id="dashboardTab"
					class="hover:text-accent"
				>
					Dashboard
				</button>
				<button id="logsTab" class="hover:text-accent">
					Logs
				</button>
			</nav>
			<div class="flex items-center gap-4">
				<img
					src="https://via.placeholder.com/50"
					alt="Farmer Photo"
					class="w-12 h-12 rounded-full border-2 border-accent object-cover"
				/>
				<div>
					<p class="font-semibold text-accent">
						Welcome, Rajesh Kumar
					</p>
					<a
						href="#"
						class="text-xs text-gray-300 hover:text-accent"
						>Logout</a
					>
				</div>
			</div>
		</header>

		<!-- Dashboard Section -->
		<main
			id="dashboardSection"
			class="w-full max-w-5xl glass-card p-8 md:p-10 space-y-6"
		>
			<form
				id="pfSellerForm"
				class="space-y-6"
				autocomplete="off"
			>
				<div>
					<label
						for="aadhar"
						class="block mb-2 font-medium"
						>Farmer’s Aadhar Number</label
					>
					<input
						type="text"
						id="aadhar"
						placeholder="Enter Aadhar Number"
						required
						class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-accent"
					/>
				</div>

				<div>
					<label
						for="cropImage"
						class="block mb-2 font-medium"
						>Upload Crop Image (Disease
						Detection)</label
					>
					<input
						type="file"
						id="cropImage"
						accept="image/*"
						required
						class="w-full text-white"
					/>
				</div>

				<div class="grid md:grid-cols-2 gap-6">
					<div>
						<label
							for="chemicalName"
							class="block mb-2 font-medium"
							>Pesticide/Fertilizer
							Name</label
						>
						<input
							type="text"
							id="chemicalName"
							placeholder="Enter chemical name"
							required
							class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-accent"
						/>
					</div>
					<div>
						<label
							for="quantity"
							class="block mb-2 font-medium"
							>Quantity (kg or
							liters)</label
						>
						<input
							type="number"
							id="quantity"
							min="0"
							step="any"
							placeholder="Enter quantity"
							required
							class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-accent"
						/>
					</div>
				</div>

				<div class="grid md:grid-cols-2 gap-6">
					<div>
						<label
							for="stockBefore"
							class="block mb-2 font-medium"
							>Stock Before
							Sell</label
						>
						<input
							type="number"
							id="stockBefore"
							min="0"
							step="any"
							placeholder="Enter stock before sell"
							required
							class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-accent"
						/>
					</div>
					<div>
						<label
							for="stockAfter"
							class="block mb-2 font-medium"
							>Stock After Sell</label
						>
						<input
							type="number"
							id="stockAfter"
							min="0"
							step="any"
							placeholder="Enter stock after sell"
							required
							class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-accent"
						/>
					</div>
				</div>

				<!-- System Functions placeholders -->
				<section class="space-y-6 mt-8">
					<div class="glass-card p-4">
						<h3 class="font-semibold mb-2">
							1. Disease Detection
							Model
						</h3>
						<p class="text-gray-300 italic">
							Model output
							placeholder: Detect
							plant disease from
							uploaded image.
						</p>
					</div>
					<div class="glass-card p-4">
						<h3 class="font-semibold mb-2">
							2. Chemical Suggestion
							Model
						</h3>
						<p class="text-gray-300 italic">
							Model output
							placeholder: Suggest
							suitable
							pesticide/fertilizer
							based on detected
							disease.
						</p>
					</div>
					<div class="glass-card p-4">
						<h3 class="font-semibold mb-2">
							3. Chemical Name
							Cross-Verification
						</h3>
						<p class="text-gray-300 italic">
							Model output
							placeholder: Verify
							user-entered
							pesticide/fertilizer
							against ML suggestion.
						</p>
					</div>
					<div class="glass-card p-4">
						<h3 class="font-semibold mb-2">
							4. Quantity
							Cross-Verification
						</h3>
						<p class="text-gray-300 italic">
							Model output
							placeholder: Check
							chemical quantity
							against farm size
							fetched by Aadhar.
						</p>
					</div>
				</section>

				<div class="flex justify-end mt-6">
					<button
						type="submit"
						class="btn-gradient text-white px-6 py-3 rounded-lg font-semibold shadow-md transition"
					>
						Record Usage on Blockchain
					</button>
				</div>
			</form>
		</main>

		<!-- Logs Section -->
		<section
			id="logsSection"
			class="w-full max-w-5xl glass-card p-8 md:p-10 hidden"
		>
			<h2 class="text-2xl font-semibold mb-6 gradient-text">
				Usage Logs
			</h2>
			<div id="logsContainer" class="space-y-4 text-sm">
				<p class="text-gray-300">
					No logs found. Start recording usage.
				</p>
			</div>
		</section>

		<footer
			class="text-xs text-gray-300 mt-10 w-full max-w-6xl text-center"
		>
			© 2025 AgriChain | Ensuring Chemical Usage Transparency
		</footer>

		<script>
			const dashboardSection =
				document.getElementById("dashboardSection");
			const logsSection =
				document.getElementById("logsSection");
			const dashboardTab =
				document.getElementById("dashboardTab");
			const logsTab = document.getElementById("logsTab");
			const logsContainer =
				document.getElementById("logsContainer");

			const logs = [];

			dashboardTab.onclick = () => {
				dashboardSection.classList.remove("hidden");
				logsSection.classList.add("hidden");
				dashboardTab.classList.add(
					"text-accent",
					"underline"
				);
				logsTab.classList.remove(
					"text-accent",
					"underline"
				);
			};

			logsTab.onclick = () => {
				dashboardSection.classList.add("hidden");
				logsSection.classList.remove("hidden");
				logsTab.classList.add(
					"text-accent",
					"underline"
				);
				dashboardTab.classList.remove(
					"text-accent",
					"underline"
				);
				renderLogs();
			};

			document.getElementById("pfSellerForm").onsubmit = (
				e
			) => {
				e.preventDefault();

				// Gather inputs
				const aadhar = e.target.aadhar.value.trim();
				const chemicalName =
					e.target.chemicalName.value.trim();
				const quantity = e.target.quantity.value.trim();
				const stockBefore =
					e.target.stockBefore.value.trim();
				const stockAfter =
					e.target.stockAfter.value.trim();
				const cropImage = e.target.cropImage.files[0];

				// Basic validation handled by "required" attribute; optionally add extra checks here

				logs.push({
					aadhar,
					chemicalName,
					quantity,
					stockBefore,
					stockAfter,
					cropImageName: cropImage
						? cropImage.name
						: "No file",
					timestamp: new Date().toLocaleString(),
				});

				alert("Usage recorded successfully!");

				e.target.reset();
			};

			function renderLogs() {
				if (logs.length === 0) {
					logsContainer.innerHTML =
						'<p class="text-gray-300">No logs found. Start recording usage.</p>';
					return;
				}

				logsContainer.innerHTML = "";
				// Show logs in reverse chronological order
				logs.slice()
					.reverse()
					.forEach((log) => {
						const logCard =
							document.createElement(
								"div"
							);
						logCard.className =
							"glass-card p-4";

						logCard.innerHTML = `
          <p><strong>Aadhar:</strong> ${log.aadhar}</p>
          <p><strong>Chemical:</strong> ${log.chemicalName}</p>
          <p><strong>Quantity:</strong> ${log.quantity}</p>
          <p><strong>Stock Before Sell:</strong> ${log.stockBefore}</p>
          <p><strong>Stock After Sell:</strong> ${log.stockAfter}</p>
          <p><strong>Uploaded Image:</strong> ${log.cropImageName}</p>
          <p class="text-xs text-gray-400 mt-1">Recorded on: ${log.timestamp}</p>
        `;
						logsContainer.appendChild(
							logCard
						);
					});
			}
		</script>
	</body>
</html>
